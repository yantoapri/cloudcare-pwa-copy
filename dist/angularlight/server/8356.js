"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=8356,exports.ids=[8356],exports.modules={78356:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PemasukanKlinikModule:()=>PemasukanKlinikModule});var common=__webpack_require__(69808),ngx_spinner=__webpack_require__(50072),fesm2015_forms=__webpack_require__(93075),router=__webpack_require__(74202),angular_datatables=__webpack_require__(65415),core=__webpack_require__(5e3),constant=__webpack_require__(70018),general_service=__webpack_require__(72890),fesm2015_http=__webpack_require__(40520);class ModulPemasukanKlinikService{constructor(generalService,http){this.generalService=generalService,this.http=http,this.urlBase="pemasukan-klinik",this.urlModule=this.generalService.getUrlModule(constant.s.url_module.modulLaporan)}getData(payload){const url=this.urlModule+"/"+this.urlBase;return this.http.post(url,payload)}getDetail(payload){const url=this.urlModule+"/"+this.urlBase+"/detail";return this.http.post(url,payload)}}__name(ModulPemasukanKlinikService,"ModulPemasukanKlinikService"),ModulPemasukanKlinikService.\u0275fac=__name(function(t){return new(t||ModulPemasukanKlinikService)(core.LFG(general_service.m),core.LFG(fesm2015_http.eN))},"ModulPemasukanKlinikService_Factory"),ModulPemasukanKlinikService.\u0275prov=core.Yz7({token:ModulPemasukanKlinikService,factory:ModulPemasukanKlinikService.\u0275fac,providedIn:"root"});var auth_service=__webpack_require__(59506);class ModulPemasukanKlinikExportService{constructor(generalService,http,authenticationService){this.generalService=generalService,this.http=http,this.authenticationService=authenticationService,this.urlBase="pemasukan-klinik",this.currentUser=this.authenticationService.currentUserValue,this.header=new fesm2015_http.WM({Accept:"application/octet-stream","Content-Type":"blob",Authorization:`Bearer ${this.currentUser.token}`}),this.urlModule=this.generalService.getUrlModule(constant.s.url_module.modulLaporan)}getDataExport(payload){const url=this.urlModule+"/"+this.urlBase+"/export";return this.http.post(url,payload,{responseType:"arraybuffer",headers:this.header})}getDetailExport(payload){const url=this.urlModule+"/"+this.urlBase+"/detail/export";return this.http.post(url,payload,{responseType:"arraybuffer",headers:this.header})}}__name(ModulPemasukanKlinikExportService,"ModulPemasukanKlinikExportService"),ModulPemasukanKlinikExportService.\u0275fac=__name(function(t){return new(t||ModulPemasukanKlinikExportService)(core.LFG(general_service.m),core.LFG(fesm2015_http.eN),core.LFG(auth_service.e))},"ModulPemasukanKlinikExportService_Factory"),ModulPemasukanKlinikExportService.\u0275prov=core.Yz7({token:ModulPemasukanKlinikExportService,factory:ModulPemasukanKlinikExportService.\u0275fac,providedIn:"root"});var money=__webpack_require__(90903),breadcrumb_component=__webpack_require__(41299),ngx_bootstrap_datepicker=__webpack_require__(67236),fesm2015_button=__webpack_require__(47423);function ViewComponent_p_20_Template(rf,ctx){1&rf&&(core.TgZ(0,"p",28),core._uU(1,"Periode transaksi tidak boleh kosong"),core.qZA())}__name(ViewComponent_p_20_Template,"ViewComponent_p_20_Template");const _c0=__name(function(){return[]},"_c0"),_c1=__name(function(){return{dateInputFormat:"DD/MM/YYYY",rangeInputFormat:"DD/MM/YYYY"}},"_c1");class ViewComponent{constructor(spinner,router2,pemasukan,pemasukanExport,money2,fb){this.spinner=spinner,this.router=router2,this.pemasukan=pemasukan,this.pemasukanExport=pemasukanExport,this.money=money2,this.fb=fb,this.datatableElement=angular_datatables.G,this.dtOptions={},this.maxDate=new Date,this.search=!1,this.currentUser=localStorage.getItem("currentUser")}ngOnInit(){var date=new Date,y=date.getFullYear(),m=date.getMonth(),d=date.getDate();this.maxDate=new Date(y,m,d),this.currentUser=null!=this.currentUser?JSON.parse(this.currentUser):null,this.params={Authorization:this.currentUser.token,x_api_key:this.currentUser.key,search:{value:"",regex:!1},transaksi_jenis:"masuk",start:"",end:"",expired_in:0},this.formInput=this.fb.group({date_from:[[new Date(y,m,1),new Date],[fesm2015_forms.kI.required]]}),this.dtOptions=this.showDataTables()}reLoadData(){this.search=!0,!this.formInput.invalid&&(this.datatableElement.dtInstance.then(dtInstance=>{dtInstance.ajax.reload()}),this.search=!1)}detail(data){let from=new Date(this.formInput.value.date_from[0]).getTime(),to=new Date(this.formInput.value.date_from[1]).getTime();this.router.navigate(["laporan/pemasukan-klinik/detail/"+data.id_poliklinik+"/"+data.nama_poliklinik+"/"+from+"/"+to])}download(resp){const url=window.URL.createObjectURL(new Blob([resp],{type:"application/ms-excel"})),link=document.createElement("a");link.href=url,link.setAttribute("download","Laporan Pemasukan Klinik.xlsx"),document.body.appendChild(link),link.click()}export(){this.search=!0,!this.formInput.invalid&&(this.spinner.show("spinner1"),this.params.month=new Date(this.formInput.value.date_from).getTime(),this.pemasukanExport.getDataExport(this.params).subscribe(resp=>{this.download(resp),this.search=!1,this.spinner.hide("spinner1")}))}showDataTables(){let self=this;return this.spinner.show("spinner1"),{searching:!1,pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(dataTablesParameters,callback)=>{dataTablesParameters.date_from=new Date(this.formInput.value.date_from[0]).getTime(),dataTablesParameters.date_to=new Date(this.formInput.value.date_from[1]).getTime(),this.pemasukan.getData(dataTablesParameters).subscribe(resp=>{callback({draw:resp.response.draw,recordsTotal:resp.response.recordsTotal,recordsFiltered:resp.response.recordsFiltered,data:resp.response.data}),this.spinner.hide("spinner1")})},columns:[{orderable:!1,searchable:!1,render:(data,type,row,full)=>full.row+1+full.settings._iDisplayStart},{data:"nama_poliklinik"},{data:"kunjungan_bpjs"},{data:"pemasukan_bpjs",render:(data,type,row,full)=>self.money.formatRupiah(parseInt(data))},{data:"kunjungan_reguler"},{data:"pemasukan_reguler",render:(data,type,row,full)=>self.money.formatRupiah(parseInt(data))},{data:"pemasukan_total",render:(data,type,row,full)=>null==data?self.money.formatRupiah(0):self.money.formatRupiah(parseInt(data))},{orderable:!1,searchable:!1,render:(data,type,row,full)=>'<button class="btn btn-link circle-primary text-ui-primary detail"><i class="far fa-eye"</i></button>'}],rowCallback:(row,data,index)=>{const self2=this;return $("td .detail",row).on("click",()=>{self2.detail(data)}),row}}}onOpenCalendar(container){container.monthSelectHandler=event=>{container._store.dispatch(container._actions.select(event.date))},container.setViewMode("month")}}__name(ViewComponent,"ViewComponent"),ViewComponent.\u0275fac=__name(function(t){return new(t||ViewComponent)(core.Y36(ngx_spinner.t2),core.Y36(router.F0),core.Y36(ModulPemasukanKlinikService),core.Y36(ModulPemasukanKlinikExportService),core.Y36(money.r),core.Y36(fesm2015_forms.qu))},"ViewComponent_Factory"),ViewComponent.\u0275cmp=core.Xpm({type:ViewComponent,selectors:[["app-view"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(angular_datatables.G,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.datatableElement=_t.first)}},"ViewComponent_Query"),decls:58,vars:12,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-4"],[1,""],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"card"],[1,"header"],[1,"body"],[3,"formGroup"],[1,"row"],[1,"col-sm-2","col-form-label","fw-bold"],[1,"col-sm-10"],["type","text","formControlName","date_from","bsDaterangepicker","","autocomplete","off",1,"form-control",3,"bsConfig","maxDate"],["class","text-danger",4,"ngIf"],[1,"col-sm-12","text-right"],["mat-raised-button","","color","success","type","button",1,"btn-space","bg-success","text-light",3,"click"],[1,"fa","fa-download"],["mat-raised-button","","color","primary","type","button",1,"btn-space",3,"click"],[1,"fa","fa-search"],["datatable","","width","100%",1,"table","table-striped","table-bordered","table-sm","table-sm",3,"dtOptions"],["rowspan","2"],["rowspan","2",1,"text-center"],["colspan","4",1,"text-center"],[1,"text-center"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],[1,"text-danger"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"section",0)(1,"div",1)(2,"div",2),core._UZ(3,"app-breadcrumb",3),core.qZA(),core.TgZ(4,"h3",4),core._uU(5,"Laporan Pemasukan Klinik"),core.qZA(),core.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"h2")(11,"strong"),core._uU(12,"Pencarian"),core.qZA()()(),core.TgZ(13,"div",9)(14,"form",10)(15,"div",11)(16,"label",12),core._uU(17,"Periode Transaksi"),core.qZA(),core.TgZ(18,"div",13),core._UZ(19,"input",14),core.YNc(20,ViewComponent_p_20_Template,2,0,"p",15),core.qZA()(),core.TgZ(21,"div",11)(22,"div",16)(23,"button",17),core.NdJ("click",__name(function(){return ctx.export()},"ViewComponent_Template_button_click_23_listener")),core._UZ(24,"i",18),core._uU(25," Excel"),core.qZA(),core.TgZ(26,"button",19),core.NdJ("click",__name(function(){return ctx.reLoadData()},"ViewComponent_Template_button_click_26_listener")),core._UZ(27,"i",20),core._uU(28," Cari"),core.qZA()()()()()(),core.TgZ(29,"div",7),core._UZ(30,"div",8),core.TgZ(31,"div",9)(32,"table",21)(33,"thead")(34,"tr")(35,"th",22),core._uU(36,"No"),core.qZA(),core.TgZ(37,"th",23),core._uU(38,"Poliklinik"),core.qZA(),core.TgZ(39,"th",24),core._uU(40,"Jumlah Pasien"),core.qZA(),core.TgZ(41,"th",23),core._uU(42,"Total Pemasukan"),core.qZA(),core.TgZ(43,"th",22),core._uU(44,"Action"),core.qZA()(),core.TgZ(45,"tr")(46,"th",25),core._uU(47,"Pasien BPJS"),core.qZA(),core.TgZ(48,"th",25),core._uU(49,"Pemasukan"),core.qZA(),core.TgZ(50,"th",25),core._uU(51,"Pasien Reguler"),core.qZA(),core.TgZ(52,"th",25),core._uU(53,"Pemasukan"),core.qZA()()(),core._UZ(54,"tbody"),core.qZA()()()()()(),core.TgZ(55,"ngx-spinner",26)(56,"p",27),core._uU(57," Loading... "),core.qZA()()()),2&rf&&(core.xp6(3),core.Q6J("title","Laporan")("items",core.DdM(10,_c0))("active_item","Laporan Pemasukan Klinik"),core.xp6(11),core.Q6J("formGroup",ctx.formInput),core.xp6(5),core.Q6J("bsConfig",core.DdM(11,_c1))("maxDate",ctx.maxDate),core.xp6(1),core.Q6J("ngIf",""==ctx.formInput.value.date_from&&ctx.search),core.xp6(12),core.Q6J("dtOptions",ctx.dtOptions),core.xp6(23),core.Q6J("name","spinner1")("fullScreen",!0))},"ViewComponent_Template"),directives:[breadcrumb_component.L,fesm2015_forms._Y,fesm2015_forms.JL,fesm2015_forms.sg,fesm2015_forms.Fj,ngx_bootstrap_datepicker.TB,fesm2015_forms.JJ,fesm2015_forms.u,ngx_bootstrap_datepicker.FR,common.O5,fesm2015_button.lW,angular_datatables.G,ngx_spinner.Ro],styles:[""]});var moment=__webpack_require__(15439);const detail_component_c0=__name(function(){return["Pemasukan Klinik"]},"detail_component_c0"),detail_component_c1=__name(function(){return["../../../../../view"]},"detail_component_c1");class DetailComponent{constructor(spinner,router2,pemasukanExport,pemasukan,money2,fb,activatedRoute){this.spinner=spinner,this.router=router2,this.pemasukanExport=pemasukanExport,this.pemasukan=pemasukan,this.money=money2,this.fb=fb,this.activatedRoute=activatedRoute,this.datatableElement=angular_datatables.G,this.dtOptions={},this.currentUser=localStorage.getItem("currentUser"),this.from=null,this.to=null,this.poli=""}ngOnInit(){this.currentUser=null!=this.currentUser?JSON.parse(this.currentUser):null,this.params={Authorization:this.currentUser.token,x_api_key:this.currentUser.key,search:{value:"",regex:!1},transaksi_jenis:"masuk",start:"",end:"",expired_in:0},this.activatedRoute.params.subscribe(params=>{params&&(this.dtOptions=this.showDataTables(params.id),this.params.id_poliklinik=params.id,this.from=parseInt(params.from),this.to=parseInt(params.to),this.poli=params.poli)})}reLoadData(){this.datatableElement.dtInstance.then(dtInstance=>{dtInstance.ajax.reload()})}download(resp){const url=window.URL.createObjectURL(new Blob([resp],{type:"application/ms-excel"})),link=document.createElement("a");link.href=url,link.setAttribute("download","Detail Laporan Pemasukan Klinik.xlsx"),document.body.appendChild(link),link.click()}export(){this.spinner.show("spinner1"),this.pemasukanExport.getDetailExport(this.params).subscribe(resp=>{this.download(resp),this.spinner.hide("spinner1")})}showDataTables(id){let self=this;return this.spinner.show("spinner1"),{searching:!1,pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(dataTablesParameters,callback)=>{dataTablesParameters.id_poliklinik=id,dataTablesParameters.date_from=parseInt(this.from),dataTablesParameters.date_to=parseInt(this.to),this.pemasukan.getDetail(dataTablesParameters).subscribe(resp=>{callback({draw:resp.response.draw,recordsTotal:resp.response.recordsTotal,recordsFiltered:resp.response.recordsFiltered,data:resp.response.data}),this.spinner.hide("spinner1")})},columns:[{orderable:!1,searchable:!1,render:(data,type,row,full)=>full.row+1+full.settings._iDisplayStart},{data:"formatted_date",render:(data,type,row,full)=>moment(data).format("DD-MM-YYYY")},{data:"kunjungan_bpjs"},{data:"pemasukan_bpjs",render:(data,type,row,full)=>self.money.formatRupiah(parseInt(data))},{data:"kunjungan_reguler"},{data:"pemasukan_reguler",render:(data,type,row,full)=>self.money.formatRupiah(parseInt(data))},{data:"pemasukan_total",render:(data,type,row,full)=>null==data?self.money.formatRupiah(0):self.money.formatRupiah(parseInt(data))}]}}onOpenCalendar(container){container.monthSelectHandler=event=>{container._store.dispatch(container._actions.select(event.date))},container.setViewMode("month")}convertDate2(date1,date2){if(date1&&date2){let month=["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],dt1=new Date(date1),dt2=new Date(date2);return dt1.getDate()+" "+month[dt1.getMonth()]+" "+dt1.getFullYear()+" - "+dt2.getDate()+" "+month[dt2.getMonth()]+" "+dt2.getFullYear()}}}__name(DetailComponent,"DetailComponent"),DetailComponent.\u0275fac=__name(function(t){return new(t||DetailComponent)(core.Y36(ngx_spinner.t2),core.Y36(router.F0),core.Y36(ModulPemasukanKlinikExportService),core.Y36(ModulPemasukanKlinikService),core.Y36(money.r),core.Y36(fesm2015_forms.qu),core.Y36(router.gz))},"DetailComponent_Factory"),DetailComponent.\u0275cmp=core.Xpm({type:DetailComponent,selectors:[["app-detail"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(angular_datatables.G,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.datatableElement=_t.first)}},"DetailComponent_Query"),decls:53,vars:11,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-4"],[1,""],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],["type","button","mat-raised-button","",1,"btn-space","bg-warning","text-light","mb-3",3,"routerLink"],[1,"fas","fa-arrow-left"],[1,"card"],[1,"body"],[1,"row","mb-4"],[1,"col-sm-8"],[1,"row","mb-2"],[1,"col-md-3"],[1,"col-sm-9"],[1,"col-sm-4","text-right"],["mat-raised-button","","color","success",1,"btn-space","bg-success","text-light",3,"click"],[1,"fa","fa-download"],["width","100%","datatable","",1,"table","table-striped","table-bordered","table-sm","table-sm",3,"dtOptions"],["rowspan","2"],["rowspan","2",1,"text-center"],["colspan","4",1,"text-center"],[1,"text-center"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"section",0)(1,"div",1)(2,"div",2),core._UZ(3,"app-breadcrumb",3),core.qZA(),core.TgZ(4,"h3",4),core._uU(5,"Detail Pemasukan Klinik"),core.qZA(),core.TgZ(6,"div",5)(7,"div",6)(8,"button",7),core._UZ(9,"i",8),core._uU(10," Kembali"),core.qZA(),core.TgZ(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"div",13)(16,"div",14),core._uU(17,"Nama Poli"),core.qZA(),core.TgZ(18,"div",15),core._uU(19),core.qZA()(),core.TgZ(20,"div",13)(21,"div",14),core._uU(22,"Periode Transaksi"),core.qZA(),core.TgZ(23,"div",15),core._uU(24),core.qZA()()(),core.TgZ(25,"div",16)(26,"button",17),core.NdJ("click",__name(function(){return ctx.export()},"DetailComponent_Template_button_click_26_listener")),core._UZ(27,"i",18),core._uU(28," Excel"),core.qZA()()(),core.TgZ(29,"table",19)(30,"thead")(31,"tr")(32,"th",20),core._uU(33,"No"),core.qZA(),core.TgZ(34,"th",21),core._uU(35,"Tanggl Transaksi"),core.qZA(),core.TgZ(36,"th",22),core._uU(37,"Jumlah Pasien"),core.qZA(),core.TgZ(38,"th",21),core._uU(39,"Total Pemasukan"),core.qZA()(),core.TgZ(40,"tr")(41,"th",23),core._uU(42,"Pasien BPJS"),core.qZA(),core.TgZ(43,"th",23),core._uU(44,"Pemasukan"),core.qZA(),core.TgZ(45,"th",23),core._uU(46,"Pasien Reguler"),core.qZA(),core.TgZ(47,"th",23),core._uU(48,"Pemasukan"),core.qZA()()(),core._UZ(49,"tbody"),core.qZA()()()()()(),core.TgZ(50,"ngx-spinner",24)(51,"p",25),core._uU(52," Loading... "),core.qZA()()()),2&rf&&(core.xp6(3),core.Q6J("title","Laporan")("items",core.DdM(9,detail_component_c0))("active_item","Detail Pemasukan Klinik"),core.xp6(5),core.Q6J("routerLink",core.DdM(10,detail_component_c1)),core.xp6(11),core.hij(": ",ctx.poli,""),core.xp6(5),core.hij(": ",ctx.convertDate2(ctx.from,ctx.to),""),core.xp6(5),core.Q6J("dtOptions",ctx.dtOptions),core.xp6(21),core.Q6J("name","spinner1")("fullScreen",!0))},"DetailComponent_Template"),directives:[breadcrumb_component.L,fesm2015_button.lW,router.rH,angular_datatables.G,ngx_spinner.Ro],styles:[""]});const routes=[{path:"",redirectTo:"view",pathMatch:"full"},{path:"view",component:ViewComponent},{path:"detail/:id/:poli/:from/:to",component:DetailComponent}];class PemasukanKlinikRoutingModule{}__name(PemasukanKlinikRoutingModule,"PemasukanKlinikRoutingModule"),PemasukanKlinikRoutingModule.\u0275fac=__name(function(t){return new(t||PemasukanKlinikRoutingModule)},"PemasukanKlinikRoutingModule_Factory"),PemasukanKlinikRoutingModule.\u0275mod=core.oAB({type:PemasukanKlinikRoutingModule}),PemasukanKlinikRoutingModule.\u0275inj=core.cJS({imports:[[router.Bz.forChild(routes)],router.Bz]});var components_module=__webpack_require__(15626);class PemasukanKlinikModule{}__name(PemasukanKlinikModule,"PemasukanKlinikModule"),PemasukanKlinikModule.\u0275fac=__name(function(t){return new(t||PemasukanKlinikModule)},"PemasukanKlinikModule_Factory"),PemasukanKlinikModule.\u0275mod=core.oAB({type:PemasukanKlinikModule}),PemasukanKlinikModule.\u0275inj=core.cJS({imports:[[common.ez,PemasukanKlinikRoutingModule,components_module.K,fesm2015_button.ot,ngx_spinner.ef,fesm2015_forms.u5,fesm2015_forms.UX,angular_datatables.T,ngx_bootstrap_datepicker.kn.forRoot()]]})}};