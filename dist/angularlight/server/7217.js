"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=7217,exports.ids=[7217],exports.modules={30873:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{X:()=>ModulPengeluaranExportService});var src_app_config_constant__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(70018),_angular_common_http__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(40520),_angular_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5e3),_general_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(72890),src_app_authentication_core_services_auth_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(59506);class ModulPengeluaranExportService{constructor(generalService,http,authenticationService){this.generalService=generalService,this.http=http,this.authenticationService=authenticationService,this.urlBase="pengeluaran",this.currentUser=this.authenticationService.currentUserValue,this.header=new _angular_common_http__WEBPACK_IMPORTED_MODULE_3__.WM({Accept:"application/octet-stream","Content-Type":"blob",Authorization:`Bearer ${this.currentUser.token}`}),this.urlModule=this.generalService.getUrlModule(src_app_config_constant__WEBPACK_IMPORTED_MODULE_0__.s.url_module.export)}exportObat(payload){const url=this.urlModule+"/"+this.urlBase+"/obat/export";return this.http.post(url,payload,{responseType:"arraybuffer",headers:this.header})}exportAlat(payload){const url=this.urlModule+"/"+this.urlBase+"/alat/export";return this.http.post(url,payload,{responseType:"arraybuffer",headers:this.header})}exportObatDetail(payload){const url=this.urlModule+"/"+this.urlBase+"/detail-obat/export";return this.http.post(url,payload,{responseType:"arraybuffer",headers:this.header})}exportAlatDetail(payload){const url=this.urlModule+"/"+this.urlBase+"/detail-alat/export";return this.http.post(url,payload,{responseType:"arraybuffer",headers:this.header})}}__name(ModulPengeluaranExportService,"ModulPengeluaranExportService"),ModulPengeluaranExportService.\u0275fac=__name(function(t){return new(t||ModulPengeluaranExportService)(_angular_core__WEBPACK_IMPORTED_MODULE_4__.LFG(_general_service__WEBPACK_IMPORTED_MODULE_1__.m),_angular_core__WEBPACK_IMPORTED_MODULE_4__.LFG(_angular_common_http__WEBPACK_IMPORTED_MODULE_3__.eN),_angular_core__WEBPACK_IMPORTED_MODULE_4__.LFG(src_app_authentication_core_services_auth_service__WEBPACK_IMPORTED_MODULE_2__.e))},"ModulPengeluaranExportService_Factory"),ModulPengeluaranExportService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_4__.Yz7({token:ModulPengeluaranExportService,factory:ModulPengeluaranExportService.\u0275fac,providedIn:"root"})},68633:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{r:()=>ModulPengeluaranService});var src_app_config_constant__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(70018),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5e3),_general_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(72890),_angular_common_http__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(40520);class ModulPengeluaranService{constructor(generalService,http){this.generalService=generalService,this.http=http,this.urlBase="pengeluaran",this.urlModule=this.generalService.getUrlModule(src_app_config_constant__WEBPACK_IMPORTED_MODULE_0__.s.url_module.modulLaporan)}getObat(payload){const url=this.urlModule+"/"+this.urlBase+"/obat";return this.http.post(url,payload)}getAlat(payload){const url=this.urlModule+"/"+this.urlBase+"/alat";return this.http.post(url,payload)}getObatDetail(payload){const url=this.urlModule+"/"+this.urlBase+"/detail-obat";return this.http.post(url,payload)}getAlatDetail(payload){const url=this.urlModule+"/"+this.urlBase+"/detail-alat";return this.http.post(url,payload)}}__name(ModulPengeluaranService,"ModulPengeluaranService"),ModulPengeluaranService.\u0275fac=__name(function(t){return new(t||ModulPengeluaranService)(_angular_core__WEBPACK_IMPORTED_MODULE_2__.LFG(_general_service__WEBPACK_IMPORTED_MODULE_1__.m),_angular_core__WEBPACK_IMPORTED_MODULE_2__.LFG(_angular_common_http__WEBPACK_IMPORTED_MODULE_3__.eN))},"ModulPengeluaranService_Factory"),ModulPengeluaranService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_2__.Yz7({token:ModulPengeluaranService,factory:ModulPengeluaranService.\u0275fac,providedIn:"root"})},37217:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PengeluaranObatModule:()=>PengeluaranObatModule});var common=__webpack_require__(69808),ngx_spinner=__webpack_require__(50072),router=__webpack_require__(74202),angular_datatables=__webpack_require__(65415),fesm2015_forms=__webpack_require__(93075),moment=__webpack_require__(15439),core=__webpack_require__(5e3),laporan_pengeluaran=__webpack_require__(68633),laporan_pengeluaran_export=__webpack_require__(30873),breadcrumb_component=__webpack_require__(41299),ngx_bootstrap_datepicker=__webpack_require__(67236),fesm2015_button=__webpack_require__(47423);function ViewComponent_p_20_Template(rf,ctx){1&rf&&(core.TgZ(0,"p",26),core._uU(1,"Tanggal transaksi tidak boleh kosong"),core.qZA())}__name(ViewComponent_p_20_Template,"ViewComponent_p_20_Template");const _c0=__name(function(){return["Obat"]},"_c0"),_c1=__name(function(){return{dateInputFormat:"DD/MM/YYYY",rangeInputFormat:"DD/MM/YYYY"}},"_c1");class ViewComponent{constructor(spinner,router2,pengeluaran,pengeluaranExport,fb){this.spinner=spinner,this.router=router2,this.pengeluaran=pengeluaran,this.pengeluaranExport=pengeluaranExport,this.fb=fb,this.datatableElement=angular_datatables.G,this.dtOptions={},this.search=!1,this.currentUser=localStorage.getItem("currentUser"),this.minDate=new Date,this.maxDate=new Date}ngOnInit(){var date=new Date,y=date.getFullYear(),m=date.getMonth(),d=date.getDate();this.maxDate=new Date(y,m,d),this.currentUser=null!=this.currentUser?JSON.parse(this.currentUser):null,this.params={Authorization:this.currentUser.token,x_api_key:this.currentUser.key,search:{value:"",regex:!1},transaksi_jenis:"masuk",start:"",end:"",expired_in:0},this.formInput=this.fb.group({date_from:[[new Date(y,m,1),new Date],[fesm2015_forms.kI.required]]}),this.dtOptions=this.showDataTables()}reLoadData(){this.search=!0,!this.formInput.invalid&&this.datatableElement.dtInstance.then(dtInstance=>{dtInstance.ajax.reload(),this.search=!1})}detail(data){this.router.navigate(["laporan/obat/pengeluaran-obat/detail/"+data.id_barang+"/"+data.nama_barang+"/"+new Date(this.formInput.value.date_from[0]).getTime()+"/"+new Date(this.formInput.value.date_from[1]).getTime()])}convertTime(tgl){let time=moment(new Date(tgl)).format("YYYY-MM-DD")+" 00:00:00";return new Date(time).getTime()}download(resp){const url=window.URL.createObjectURL(new Blob([resp],{type:"application/ms-excel"})),link=document.createElement("a");link.href=url,link.setAttribute("download","Laporan Pengeluaran Obat.xlsx"),document.body.appendChild(link),link.click()}export(){this.spinner.show("spinner1"),this.params.date_from=new Date(this.convertTime(this.formInput.value.date_from[0])).getTime(),this.params.date_to=new Date(this.convertTime(this.formInput.value.date_from[1])).getTime(),this.pengeluaranExport.exportObat(this.params).subscribe(resp=>{this.download(resp),this.search=!1,this.spinner.hide("spinner1")})}showDataTables(){return this.spinner.show("spinner1"),{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(dataTablesParameters,callback)=>{dataTablesParameters.date_from=new Date(this.convertTime(this.formInput.value.date_from[0])).getTime(),dataTablesParameters.date_to=new Date(this.convertTime(this.formInput.value.date_from[1])).getTime(),this.pengeluaran.getObat(dataTablesParameters).subscribe(resp=>{callback({draw:resp.response.draw,recordsTotal:resp.response.recordsTotal,recordsFiltered:resp.response.recordsFiltered,data:resp.response.data}),this.spinner.hide("spinner1")})},columns:[{orderable:!1,searchable:!1,render:(data,type,row,full)=>full.row+1+full.settings._iDisplayStart},{data:"nama_barang"},{data:"jumlah_bpjs"},{data:"jumlah_reguler"},{data:"jumlah_langsung"},{data:"jumlah_total"},{data:"stok_akhir"},{orderable:!1,searchable:!1,render:(data,type,row,full)=>' <button  class="btn btn-link circle-primary text-ui-primary detail"><i class="far fa-eye"></i></button>'}],rowCallback:(row,data,index)=>{const self=this;return $("td .detail",row).on("click",()=>{self.detail(data)}),row}}}}__name(ViewComponent,"ViewComponent"),ViewComponent.\u0275fac=__name(function(t){return new(t||ViewComponent)(core.Y36(ngx_spinner.t2),core.Y36(router.F0),core.Y36(laporan_pengeluaran.r),core.Y36(laporan_pengeluaran_export.X),core.Y36(fesm2015_forms.qu))},"ViewComponent_Factory"),ViewComponent.\u0275cmp=core.Xpm({type:ViewComponent,selectors:[["app-view"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(angular_datatables.G,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.datatableElement=_t.first)}},"ViewComponent_Query"),decls:58,vars:12,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-4"],[1,""],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"card"],[1,"header"],[1,"body"],[3,"formGroup"],[1,"row"],[1,"col-sm-2","col-form-label","fw-bold"],[1,"col-sm-10"],["type","text","formControlName","date_from","bsDaterangepicker","",1,"form-control",3,"bsConfig","maxDate"],["class","text-danger",4,"ngIf"],[1,"col-sm-12","text-right"],["mat-raised-button","","color","success",1,"btn-space","bg-success","text-light",3,"click"],[1,"fa","fa-download"],["mat-raised-button","","color","primary","type","button",1,"btn-space",3,"click"],[1,"fa","fa-search"],["datatable","","width","100%",1,"table","table-striped","table-bordered","table-sm","table-sm",3,"dtOptions"],["rowspan","2"],["colspan","3",1,"text-center"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],[1,"text-danger"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"section",0)(1,"div",1)(2,"div",2),core._UZ(3,"app-breadcrumb",3),core.qZA(),core.TgZ(4,"h3",4),core._uU(5,"Laporan Pengeluaran Obat"),core.qZA(),core.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"h2")(11,"strong"),core._uU(12,"Pencarian"),core.qZA()()(),core.TgZ(13,"div",9)(14,"form",10)(15,"div",11)(16,"label",12),core._uU(17,"Tanggal Transaksi"),core.qZA(),core.TgZ(18,"div",13),core._UZ(19,"input",14),core.YNc(20,ViewComponent_p_20_Template,2,0,"p",15),core.qZA()(),core.TgZ(21,"div",11)(22,"div",16)(23,"button",17),core.NdJ("click",__name(function(){return ctx.export()},"ViewComponent_Template_button_click_23_listener")),core._UZ(24,"i",18),core._uU(25," Excel"),core.qZA(),core.TgZ(26,"button",19),core.NdJ("click",__name(function(){return ctx.reLoadData()},"ViewComponent_Template_button_click_26_listener")),core._UZ(27,"i",20),core._uU(28," Cari"),core.qZA()()()()()(),core.TgZ(29,"div",7),core._UZ(30,"div",8),core.TgZ(31,"div",9)(32,"table",21)(33,"thead")(34,"tr")(35,"th",22),core._uU(36,"No"),core.qZA(),core.TgZ(37,"th",22),core._uU(38,"Nama Obat"),core.qZA(),core.TgZ(39,"th",23),core._uU(40,"Tipe Pengeluaran"),core.qZA(),core.TgZ(41,"th",22),core._uU(42,"Total Pengeluaran"),core.qZA(),core.TgZ(43,"th",22),core._uU(44,"Stok Akhir"),core.qZA(),core.TgZ(45,"th",22),core._uU(46,"Aksi"),core.qZA()(),core.TgZ(47,"tr")(48,"th"),core._uU(49,"Pasien BPJS"),core.qZA(),core.TgZ(50,"th"),core._uU(51,"Pasien Reguler"),core.qZA(),core.TgZ(52,"th"),core._uU(53,"Penjualan"),core.qZA()()(),core._UZ(54,"tbody"),core.qZA()()()()()(),core.TgZ(55,"ngx-spinner",24)(56,"p",25),core._uU(57," Loading... "),core.qZA()()()),2&rf&&(core.xp6(3),core.Q6J("title","Laporan")("items",core.DdM(10,_c0))("active_item","Laporan Pengeluaran Obat"),core.xp6(11),core.Q6J("formGroup",ctx.formInput),core.xp6(5),core.Q6J("bsConfig",core.DdM(11,_c1))("maxDate",ctx.maxDate),core.xp6(1),core.Q6J("ngIf",""==ctx.formInput.value.date_from&&ctx.search),core.xp6(12),core.Q6J("dtOptions",ctx.dtOptions),core.xp6(23),core.Q6J("name","spinner1")("fullScreen",!0))},"ViewComponent_Template"),directives:[breadcrumb_component.L,fesm2015_forms._Y,fesm2015_forms.JL,fesm2015_forms.sg,fesm2015_forms.Fj,ngx_bootstrap_datepicker.TB,fesm2015_forms.JJ,fesm2015_forms.u,ngx_bootstrap_datepicker.FR,common.O5,fesm2015_button.lW,angular_datatables.G,ngx_spinner.Ro],styles:[""]});const detail_component_c0=__name(function(){return["Obat"]},"detail_component_c0"),detail_component_c1=__name(function(){return["../../../../../view"]},"detail_component_c1");class DetailComponent{constructor(spinner,activatedRoute,pengeluaran,pengeluaranExport){this.spinner=spinner,this.activatedRoute=activatedRoute,this.pengeluaran=pengeluaran,this.pengeluaranExport=pengeluaranExport,this.datatableElement=angular_datatables.G,this.dtOptions={},this.obat="",this.periode="",this.currentUser=localStorage.getItem("currentUser")}ngOnInit(){this.currentUser=null!=this.currentUser?JSON.parse(this.currentUser):null,this.params={Authorization:this.currentUser.token,x_api_key:this.currentUser.key,search:{value:"",regex:!1},id_barang:"4cd91923-70bf-43ea-a827-38668daeca63",date_from:"2023-03-01",date_to:"2023-03-21"},this.activatedRoute.params.subscribe(params=>{params&&(this.obat=params.obat,this.params.date_from=params.tgl1,this.params.date_to=params.tgl2,this.periode=moment(new Date(parseInt(params.tgl1))).format("DD/MM/YYYY")+" - "+moment(new Date(parseInt(params.tgl2))).format("DD/MM/YYYY"),this.params.id_barang=params.id,this.dtOptions=this.showDataTables())})}download(resp){const url=window.URL.createObjectURL(new Blob([resp],{type:"application/ms-excel"})),link=document.createElement("a");link.href=url,link.setAttribute("download","Detail Laporan Pengeluaran Obat.xlsx"),document.body.appendChild(link),link.click()}export(){this.spinner.show("spinner1"),this.pengeluaranExport.exportObat(this.params).subscribe(resp=>{this.download(resp),this.spinner.hide("spinner1")})}showDataTables(){return this.spinner.show("spinner1"),{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(dataTablesParameters,callback)=>{dataTablesParameters.date_from=this.params.date_from,dataTablesParameters.date_to=this.params.date_to,dataTablesParameters.id_barang=this.params.id_barang,this.pengeluaran.getObatDetail(dataTablesParameters).subscribe(resp=>{callback({draw:resp.response.draw,recordsTotal:resp.response.recordsTotal,recordsFiltered:resp.response.recordsFiltered,data:resp.response.data}),this.spinner.hide("spinner1")})},columns:[{orderable:!1,searchable:!1,render:(data,type,row,full)=>full.row+1+full.settings._iDisplayStart},{data:"formatted_date",render(data,type,row,full){let tgl=data.split("-");return tgl[2]+"-"+tgl[1]+"-"+tgl[0]}},{data:"jumlah_bpjs"},{data:"jumlah_reguler"},{data:"jumlah_langsung"},{data:"jumlah_total"},{data:"stok_akhir"}]}}}__name(DetailComponent,"DetailComponent"),DetailComponent.\u0275fac=__name(function(t){return new(t||DetailComponent)(core.Y36(ngx_spinner.t2),core.Y36(router.gz),core.Y36(laporan_pengeluaran.r),core.Y36(laporan_pengeluaran_export.X))},"DetailComponent_Factory"),DetailComponent.\u0275cmp=core.Xpm({type:DetailComponent,selectors:[["app-view"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(angular_datatables.G,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.datatableElement=_t.first)}},"DetailComponent_Query"),decls:54,vars:11,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-4"],[1,""],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"col-md-12","mb-3"],["type","button","mat-raised-button","","color","warning",1,"btn-space","bg-warning","text-light",3,"routerLink"],[1,"fas","fa-arrow-left"],[1,"card"],[1,"body"],[1,"row","mb-4"],[1,"col-sm-8"],[1,"row","mb-2"],[1,"col-md-3"],[1,"col-sm-9"],[1,"col-sm-4","text-right"],["mat-raised-button","","color","success",1,"btn-space","bg-success","text-light",3,"click"],[1,"fa","fa-download"],["width","100%","datatable","",1,"table","table-striped","table-bordered","table-sm","table-sm",3,"dtOptions"],["rowspan","2"],["colspan","3",1,"text-center"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"section",0)(1,"div",1)(2,"div",2),core._UZ(3,"app-breadcrumb",3),core.qZA(),core.TgZ(4,"h3",4),core._uU(5,"Detail Pengeluaran Obat"),core.qZA(),core.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"button",8),core._UZ(10,"i",9),core._uU(11," Kembali"),core.qZA()(),core.TgZ(12,"div",10)(13,"div",11)(14,"div",12)(15,"div",13)(16,"div",14)(17,"div",15),core._uU(18,"Nama Obat"),core.qZA(),core.TgZ(19,"div",16),core._uU(20),core.qZA()(),core.TgZ(21,"div",14)(22,"div",15),core._uU(23,"Tanggal Transaksi"),core.qZA(),core.TgZ(24,"div",16),core._uU(25),core.qZA()()(),core.TgZ(26,"div",17)(27,"button",18),core.NdJ("click",__name(function(){return ctx.export()},"DetailComponent_Template_button_click_27_listener")),core._UZ(28,"i",19),core._uU(29," Excel"),core.qZA()()(),core.TgZ(30,"table",20)(31,"thead")(32,"tr")(33,"th",21),core._uU(34,"No"),core.qZA(),core.TgZ(35,"th",21),core._uU(36,"Tanggal Transaksi"),core.qZA(),core.TgZ(37,"th",22),core._uU(38,"Tipe Pengeluaran"),core.qZA(),core.TgZ(39,"th",21),core._uU(40,"Total Pengeluaran"),core.qZA(),core.TgZ(41,"th",21),core._uU(42,"Stok Akhir"),core.qZA()(),core.TgZ(43,"tr")(44,"th"),core._uU(45,"Pasien BPJS"),core.qZA(),core.TgZ(46,"th"),core._uU(47,"Pasien Reguler"),core.qZA(),core.TgZ(48,"th"),core._uU(49,"Penjualan"),core.qZA()()(),core._UZ(50,"tbody"),core.qZA()()()()()(),core.TgZ(51,"ngx-spinner",23)(52,"p",24),core._uU(53," Loading... "),core.qZA()()()),2&rf&&(core.xp6(3),core.Q6J("title","Laporan")("items",core.DdM(9,detail_component_c0))("active_item","Detail Pengeluaran Obat"),core.xp6(6),core.Q6J("routerLink",core.DdM(10,detail_component_c1)),core.xp6(11),core.hij(": ",ctx.obat,""),core.xp6(5),core.hij(": ",ctx.periode,""),core.xp6(5),core.Q6J("dtOptions",ctx.dtOptions),core.xp6(21),core.Q6J("name","spinner1")("fullScreen",!0))},"DetailComponent_Template"),directives:[breadcrumb_component.L,fesm2015_button.lW,router.rH,angular_datatables.G,ngx_spinner.Ro],styles:[""]});const routes=[{path:"",redirectTo:"view",pathMatch:"full"},{path:"view",component:ViewComponent},{path:"detail/:id/:obat/:tgl1/:tgl2",component:DetailComponent}];class PengeluaranObatRoutingModule{}__name(PengeluaranObatRoutingModule,"PengeluaranObatRoutingModule"),PengeluaranObatRoutingModule.\u0275fac=__name(function(t){return new(t||PengeluaranObatRoutingModule)},"PengeluaranObatRoutingModule_Factory"),PengeluaranObatRoutingModule.\u0275mod=core.oAB({type:PengeluaranObatRoutingModule}),PengeluaranObatRoutingModule.\u0275inj=core.cJS({imports:[[router.Bz.forChild(routes)],router.Bz]});var components_module=__webpack_require__(15626);class PengeluaranObatModule{}__name(PengeluaranObatModule,"PengeluaranObatModule"),PengeluaranObatModule.\u0275fac=__name(function(t){return new(t||PengeluaranObatModule)},"PengeluaranObatModule_Factory"),PengeluaranObatModule.\u0275mod=core.oAB({type:PengeluaranObatModule}),PengeluaranObatModule.\u0275inj=core.cJS({imports:[[common.ez,angular_datatables.T,ngx_spinner.ef,fesm2015_button.ot,PengeluaranObatRoutingModule,fesm2015_forms.u5,fesm2015_forms.UX,components_module.K,ngx_bootstrap_datepicker.kn.forRoot()]]})}};